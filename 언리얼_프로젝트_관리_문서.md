# [Ludico] KNOCKturne 
### 언리얼 프로젝트 관리 문서 (엔진 버전 5.0.3)

---

## 작업 전 세팅 순서

1. 카카오톡, 디스코드 등에서 업데이트된 애셋이 있는지 확인 후 구글 드라이브에서 다운로드 받는다.
2. 깃허브 데스크탑에서 Fetch 내용이 있는지 확인한다.
3. 깃허브 데스크탑의 Current Branch를 자신의 것으로 세팅한다.
4. 작업을 시작한다.


---

## 목차
 1. 서론
 2. 엔진 사용시 숙지 사항
 3. Git 저장소
 4. Git Branch
 5. Git Issue
 6. 참고


---
## 1. 서론
- 언리얼 프로젝트는 용량이 매우 커 Git 단일 저장소로는 모든 파일을 관리하기 적합하지 않다. 기본적으로 100MB 이상의 파일 업로드를 허용하지 않기 때문에, 대용량 파일, 애셋을 관리하는 별도의 저장소를 두고 사용하는 것이 일반적이다.
  - **구글 드라이브를 활용**
`구글 드라이브`는 15GB의 무료 저장소를 제공한다. 녹턴의 데모 버전이 아무리 커도 15GB면 모든 에셋을 수용할 수 있을 것으로 보인다. 애셋 저장용 계정을 따로 만들고, 그 곳에 에셋을 저장하는 식으로 진행하는 것이 적합할 것이다.

## 2. 엔진 사용시 숙지 사항
- 언리얼 엔진을 사용하면서 기본적으로 알아둬야 할 기능들에 대한 목록이다.
  - **라이브 코딩(컴파일)**
    언리얼 엔진의 C++ 코드 컴파일 시스템으로, Ctrl + Alt + F11을 누르면 라이브 코딩이 실행된다. 해당 과정이 끝나면 C++ 클래스로 수정한 사항이 적용된다. 

    이때 종종 변경사항이 적용되지 않을 때가 있는데, 에디터를 닫고 다시 켠 후 라이브 코딩을 해주면 거의 된다. 블루프린트 수정사항은 자체 컴파일 기능이 있어 라이브 코딩이 필요하지 않다.
    이때 두 개 이상의 언리얼 에디터를 동시에 키고 있으면  여러 프로젝트에서 동시에 라이브 코딩이 진행되는 것처럼 보이지만, 가장 최근에 활성화한 프로젝트만 실제 라이브 코딩이 되니 괜찮다.


  - **블루프린트 코멘트**

    <p align="center"><img src = "https://user-images.githubusercontent.com/57585303/195383937-30a1d19e-ae90-4f42-afef-3eb175745d1d.png"></p>
    
    위 그림과 같이 노드 체인을 감싸고 있는 불투명한 상자를 코멘트라고 한다.

    블루프린트로 기능을 구현할 때 코드를 함수화하듯이 작은 기능 단위로 묶어 노드들을 코멘트로 감싸주면 직관적으로 깔끔하게 블루프린트를 관리할 수 있다.

## 3. Git 저장소
- Github의 원격 저장소(Repository)에는 필수적인 파일만 저장한다. 저장소에 있는 다른 파일을 이용해 생성할 수 있는 파일(ex. sln 파일 등)은 저장하지 않는다. 

  어떤 파일을 원격 저장소에 저장할 것인지는 .gitignore 파일을 이용해 관리한다.
  - **`.gitignore`**
  원격 저장소 생성 시 추가할 수 있는 파일로, 로컬 저장소의 특정 파일을 원격 저장소에 업로드하지 않도록 제한하는 역할을 한다. 현재 KNOCKturne repository에는 언리얼 엔진 맞춤 .gitignore 파일을 생성해 둔 상태이다. 해당 파일은 Git이 개발자가 원격 저장소를 Clone한 로컬 저장소에서 Change가 발생했을 때 특정 파일의 Change를 무시하는 역할을 한다.

    다시 말해, 로컬 저장소에는 애셋을 포함하여 무수히 많은 파일이 프로젝트 폴더 안에 저장돼 있지만, .gitignore 파일을 활용하면 일일이 특정 파일에 대한 Change를 Discard하지 않아도 원하는 파일만 원격 저장소에 저장할 수 있다.

   언리얼 프로젝트에서 .gitignore 파일로 관리해야 할 대상은 대표적으로 엔진에 의해 생성되는 파일 / 애셋 파일 / 스크립트 편집기(VS 등)에 의해 생성되는 파일이 해당된다. 이때 에셋 파일은 1.a절에서 언급한 별도의 저장소를 활용한다. 

  - **언리얼 프로젝트 디렉토리 구조**
  언리얼 프로젝트가 생성되었을 때 접근할 수 있는 디렉토리 구조와 각 요소가 무엇인지 간략하게 알아볼 것이다. 

   C++ 기반 소스 프로젝트는 다음과 같은 디렉토리 구조를 갖는다. KNOCKturne 역시 블루프린트와 C++을 혼합하여 사용할 것이므로 해당 구조에 대해 알아 놓을 필요가 있다. 아래 `항목 ⅰ`의 요소들을 먼저 파악하고, 나머지는 후에 해도 괜찮다.

### ⅰ. 깃허브에 반드시 저장해야 하는 파일 및 폴더
|이름|내용|
|:---------:|---|
|  `프로젝트.uproject`  | - 언리얼 에디터 구동 시 해당 프로젝트에 대한 정보를 포함하고 있는 JSON 파일. <br>언리얼 에디터를 구동시키는 연결 파일.|
|`Config`|- 프로젝트의 언리얼 환경설정 파일을 담고 있는 폴더.<br><br>- 지워도 에디터 실행에는 문제가 되지 않지만 만약 프로젝트를 작업한 상태에서 지웠다면<br> 설정해놓은 설정값들은 없어지고 언리얼 엔진에서 제공하는 기본 세팅으로 적용.<br><br>- 지우고 나서 프로젝트 실행해도 Config 폴더가 생기지는 않음.<br> Default 설정 파일들은 언리얼 엔진 폴더에 있기 때문.|
|`Content`|- 언리얼 에디터에서 사용하는 uasset들이 들어있는 폴더.|
|`Source`|- C++ 프로젝트 전용. 프로젝트의 모듈 소스와 빌드 파이프라인 C# 소스파일 등이 들어있는 폴더.|
|`Plugins(옵션)`|- 해당 프로젝트에서 외부 플러그인 혹은 자체 제작 플러그인을 사용하는 경우 존재하는 폴더.<br><br> - 엔진에서 제공해주는 플러그인은 해당 프로젝트 폴더에 생성되지 않음.|

### ⅱ. 깃허브에 있으면 좋은 파일 및 폴더

|이름|내용|
|:---:|---|
| `Binaries` |- C++ 컴파일 과정을 거쳐 생성된 프로젝트에 대한 에디터 전용 DLL 파일들이 있는 폴더.<br><br> - 그렇기 때문에 이 폴더가 없으면 .uproject를 실행시킬 때마다 에디터 실행 시 <br>'Missing <프로젝트명> Modules' 메시지 팝업을 띄움. Yes를 누르면 컴파일 과정을 거쳐 <br>다시 파일과 폴더를 생성하고, 에디터가 실행됨.|
|`Saved`|- 지워도 문제가 되지는 않지만 작업 시 귀찮은 부분들이 존재할 수 있음.<br><br> - 프로젝트 작업 시 임시로 저장되는 파일들이 보관되는 장소로, 자동 저장, 스크린샷, 빌드 파일, <br>백업 임시 파일, 로그 등등 많은 데이터가 축적되는 장소.<br><br> - 언리얼 에디터 사용 시 작업의 효율성을 높이거나 복구작업, 문제 확인 등의 활용성이 높은 폴더.<br><br> - 다만 작업이 길어지고 패키징까지 하면 용량을 꽤 많이 잡아먹음.|

### ⅲ. 깃허브에 올리지 않아도 되는 파일 및 폴더

|이름|내용|
|:---:|---|
| `Intermediate` |- 언리얼 엔진 라이브러리 및 해당 프로젝트 소스 코드에 대한 <br>빌드 과정을 거치면 생성되는 파일들이 들어있는 폴더.<br><br>- [언리얼 문서 - 디렉터리 구조 설명] 엔진이나 게임 빌드 도중 생성된 임시 파일이 들어 있으며,<br> 게임 디렉터리에서 셰이더는 Intermediate 디렉터리에 저장됨.<br><br>- 임시 파일이기 때문에 지워도 에디터 실행 시 자동으로 생성됨.|
| `Build` |- 언리얼 프로젝트 패키징 과정을 거치면 생성되는 폴더.<br><br>- [언리얼 문서 - 디렉터리 구조 설명] 엔진이나 게임을 빌드하는데 필요한 파일은 물론,<br> 플랫폼별 빌드를 만드는데 필요한 파일도 들어 있음. <br><br>- 예를 들면, 안드로이드 플랫폼의 경우 빌드 환경 설정(프로젝트 설정 - Android) 시 자동으로 생성됨.|
|`.vs`|- C++ 프로젝트에서 .sln 파일과 마찬가지로 Generate 과정에서 생성되는 폴더.<br><br>- 폴더 자체는 숨김 설정되어 있으므로 윈도우 탐색기의 폴더 옵션에서<br> 숨김 파일 보기를 설정해야만 볼 수 있음.<br><br>- 해당 프로젝트를 Visual Studio에서 실행할 때 초기화 및 데이터 구조 등을 기록하여<br> 추후 솔루션 파일을 실행할 때 불러오기 과정을 단축하기 위한 용도.<br><br>- 지워도 솔루션 파일을 실행하거나 Generate 과정을 거치면 다시 생김.|
|`프로젝트.sln`|- Visual Studio Solution 파일.<br><br>- .uproject 파일 선택 후 마우스 우클릭 → 팝업 메뉴에서 'Generate Visual Studio project files'를 <br>선택하면 생성되는 C++ 프로젝트에서만 볼 수 있는 파일.<br><br> - Visual Studio에서 작업하기 위해서는 필요함.<br><br> - 지워도 위에 적은 방식으로 다시 생성할 수 있음.|

## 4. Git Branch

- main 브랜치에는 완성된 기능만을 적용한다. 모든 작업 단위마다 브랜치를 만들고(ex. 인트로 화면 제작, 1스테이지 퍼즐 파트 구현, 1스테이지 전투 파트 구현 등 구체적인 작업 단위), 각 작업을 마치고 검증이 끝난 후에 main 브랜치로 병합한다. 이때 작업별로 나눈 브랜치를 토픽(Topic) 브랜치라고 한다.

  하나의 작업에 두 명 이상의 인원이 투입될 경우 해당 토픽 브랜치를 Current로 두고 작업자별로 새롭게 브랜치를 생성한다. 각자의 브랜치에서 끝낸 작업은 토픽 브랜치로, 모든 작업자가 마무리하여 토픽의 검증까지 끝냈다면 main 브랜치로 병합한다.

  <p align="center"><img src = "https://user-images.githubusercontent.com/57585303/195384759-824f04ea-68e1-4ed4-bec2-ca772d6395f5.png"></p>

  Github Desktop의 경우 위 그림과 같이 Current branch를 main이 아닌 브랜치로 두었을 때, 해당 브랜치를 Base로 하는 파생 브랜치 생성이 가능하다. 물론 웹에서도 방법은 똑같다.
  
  <p align="center"><img src = "https://user-images.githubusercontent.com/57585303/195385028-92ce2922-d85e-4537-8700-9347e36773a6.png"></p>

## 5. Git Issue
개발하면서 생기는 문제나 개선점을 기록하는 게시판이다.

  <p align="center"><img src = "https://user-images.githubusercontent.com/57585303/195385292-db2d554e-6a1d-4f4c-8d67-ed8cfa4e7eaf.png"></p>

  New issue로 새로운 게시글을 작성할 수 있으며, 작성시 Assignees로 해당 이슈를 해결할 수 있는, 그리고 이슈를 주의 깊게 봐야 할 사람을 태그할 수 있다. 또한 Labels로 버그, 개선점, 질문, 설명 등 이슈의 카테고리를 설정할 수 있다. 

  루디코 팀의 경우 구글 드라이브와 디스코드로 원활한 소통이 이루어지고 있지만, 해당 기능을 종종 사용해보는 것도 괜찮은 경험이 될 것 같다.

  - 작성 요령
    1. 어디에 문제가 발생했는지 (ex. 시스템 환경 설정, 엔진 설정, Github, Visual Studio, 블루프린트 등 상세 파트)
    2. 오류 사진이나 로그와 같은 상세 정보
    3. 이슈 해결에 도움을 줄 담당자
    4. 어떤 부분이 문제라고 생각하는지(이슈에 대한 고민의 흔적) 
    5. 어떤 해결법을 시도해 봤는지(해결법 사이트 링크 포함)

    등을 포함하면 아주 정석적인 이슈 게시가 될 것이다. 
  
담당자는 확인 후 어떤 정보가 더 필요한지 알리고 가이드 제시 혹은 토의 날짜를 잡아 문제를 해결한다. 문제가 해결되면 어떻게 해결됐는지 댓글로 추가적인 내용을 게시한다.



---

## 참고
 - [[UE Document] 디렉터리 구조](https://docs.unrealengine.com/4.26/ko/Basics/DirectoryStructure/)
 - [깃허브를 통한 언리얼 엔진 프로젝트 공유 방법](https://youngjoongkwon.wordpress.com/2018/05/25/%EA%B9%83%ED%97%88%EB%B8%8C%EB%A5%BC-%ED%86%B5%ED%95%9C-%EC%96%B8%EB%A6%AC%EC%96%BC%EC%97%94%EC%A7%84-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EA%B3%B5%EC%9C%A0-%EB%B0%A9%EB%B2%95/)
 - [[Tip] 협업시 관리해야할 언리얼 엔진 4 디렉토리에 대하여](https://somworks.tistory.com/21)
 - [[언리얼 엔진] 프로젝트 폴더 구조 및 용량 관리](https://leeporter.tistory.com/10)
